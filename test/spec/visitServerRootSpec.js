// Generated by CoffeeScript 1.6.3
var app, nock, request, should;

request = require('supertest');

app = require(process.cwd() + '/src/app');

nock = require('nock');

should = require('chai').should;

should();

describe('AiR RESTFul APIs', function() {
  return it('should return fake cso if searching "order"', function(done) {
    var expected, queryString, scope;
    expected = {
      order: '1-1234567890-1'
    };
    queryString = '/search?roder=1-1234567890-1';
    scope = nock("http://localhost:" + (app.get('port'))).get(queryString).reply(200, expected);
    return request('http://localhost:9898').get(queryString).end(function(err, res) {
      var actual;
      res.status.should.equal(200);
      actual = res.body;
      actual.order.should.equal(expected.order);
      scope.done();
      return done();
    });
  });
});
